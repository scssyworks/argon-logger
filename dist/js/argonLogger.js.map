{"version":3,"file":"argonLogger.js","sources":["../../src/index.js"],"sourcesContent":["/**\n * Logger class\n * @class\n */\nexport default class Logger {\n    constructor(config = {}) {\n        this.config = Object.freeze({\n            allowedHostnames: ['localhost', '127.0.0.1', '0.0.0.0'],\n            disable: false,\n            allowedQueryStringParameters: ['debug'],\n            ...config\n        });\n        this.location = typeof window === 'undefined' ? {} : window.location;\n    }\n}\n\n/**\n * Tests if current host name matches allowed hostnames\n * @param {string} hostname Current hostname\n * @param {object} config Configuration\n */\nfunction matchesURL(hostname, config) {\n    return !!config.allowedHostnames.filter(URL => (URL.indexOf(hostname) > -1)).length;\n}\n\n/**\n * Returns a map of query string key value pairs\n * @param {string} queryString Current query string\n */\nfunction getAllParams(queryString) {\n    queryString = queryString.substring(queryString.charAt(0) === '?' ? 1 : 0);\n    return queryString.split('&').map((pairs) => {\n        const [key, value] = pairs.split('=').map(part => decodeURIComponent(part).trim());\n        return { key, value };\n    });\n}\n\n/**\n * Alias for hasOwnProperty\n * @param {object} object Target object\n * @param {string} key Key name\n */\nfunction hasOwn(object, key) {\n    return Object.prototype.hasOwnProperty.call(object, key);\n}\n\n/**\n * Tests if any existing query parameter matches configuration\n * @param {string} queryString Query string\n * @param {object} config Configuration\n */\nfunction matchesQueryParam(queryString, config) {\n    const allParams = getAllParams(queryString);\n    const allowedParams = [];\n    config.allowedQueryStringParameters.forEach(param => {\n        if (typeof param === 'string') {\n            const [key, value = true] = param.split('=');\n            allowedParams.push({ key, value });\n        } else if (\n            param\n            && typeof param === 'object'\n            && hasOwn(param, 'key')\n            && hasOwn(param, 'value') // Schema check\n        ) {\n            param.key = param.key.trim();\n            param.value = (`${param.value}`).trim();\n            allowedParams.push(param);\n        }\n    });\n    let result = true;\n    allowedParams.forEach(param => {\n        const currentResult = !!allParams.filter(queryParam => (\n            param.key === queryParam.key\n            && (param.value === queryParam.value || param.value === true)\n        )).length;\n        result = result && currentResult;\n    });\n    return result;\n}\n\n// Extending current Logger class to include all console methods\nif (typeof console !== 'undefined') {\n    Object.keys(console).forEach(prop => {\n        if (typeof console[prop] === 'function') {\n            Logger.prototype[prop] = function (...args) {\n                if (\n                    (matchesURL(this.location.hostname, this.config) || matchesQueryParam(this.location.search, this.config))\n                    && !this.disable\n                ) {\n                    console[prop](...args);\n                }\n            };\n        } else {\n            Logger.prototype[prop] = console[prop];\n        }\n    });\n}"],"names":["Logger","config","Object","freeze","allowedHostnames","disable","allowedQueryStringParameters","location","window","matchesURL","hostname","filter","URL","indexOf","length","getAllParams","queryString","substring","charAt","split","map","pairs","part","decodeURIComponent","trim","key","value","hasOwn","object","prototype","hasOwnProperty","call","matchesQueryParam","allParams","allowedParams","forEach","param","push","result","currentResult","queryParam","console","keys","prop","search"],"mappings":"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"}