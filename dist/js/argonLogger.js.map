{"version":3,"file":"argonLogger.js","sources":["../../src/index.js"],"sourcesContent":["/**\n * Logger class\n * @class\n */\nexport default class Logger {\n    constructor(config = {}) {\n        this.config = Object.freeze({\n            allowedHostnames: ['localhost', '127.0.0.1', '0.0.0.0'],\n            disable: false,\n            allowedQueryStringParameters: ['debug'],\n            allowedPorts: [],\n            ...config\n        });\n        this.location = typeof window === 'undefined' ? {} : window.location;\n        this.URL = this.location.href;\n    }\n}\n\n/**\n * Tests if current host name matches allowed hostnames\n * @param {string} hostname Current hostname\n * @param {object} config Configuration\n */\nfunction matchesURL(hostname, config) {\n    const allowedHostnames = Array.isArray(config.allowedHostnames) ? config.allowedHostnames : [];\n    if (allowedHostnames.length === 0) {\n        return true;\n    }\n    return !!allowedHostnames.filter(URL => (URL.indexOf(hostname) > -1)).length;\n}\n\n/**\n * Checks if given port is allowed\n * @param {string} port Current port\n * @param {object} config Configuration\n */\nfunction matchesPort(port, config) {\n    let allowedPorts = Array.isArray(config.allowedPorts) ? config.allowedPorts : [];\n    allowedPorts = allowedPorts.map(port => (`${port}`).trim());\n    if (allowedPorts.length === 0) {\n        return true;\n    }\n    return (allowedPorts.indexOf(port) > -1);\n}\n\n/**\n * Returns a map of query string key value pairs\n * @param {string} queryString Current query string\n */\nfunction getAllParams(queryString) {\n    queryString = queryString.substring(queryString.charAt(0) === '?' ? 1 : 0);\n    return queryString.split('&').map((pairs) => {\n        const [key, value] = pairs.split('=').map(part => decodeURIComponent(part).trim());\n        return { key, value };\n    });\n}\n\n/**\n * Alias for hasOwnProperty\n * @param {object} object Target object\n * @param {string} key Key name\n */\nfunction hasOwn(object, key) {\n    return Object.prototype.hasOwnProperty.call(object, key);\n}\n\n/**\n * Tests if any existing query parameter matches configuration\n * @param {string} queryString Query string\n * @param {object} config Configuration\n */\nfunction matchesQueryParam(queryString, config) {\n    const allowedQueryStringParameters = Array.isArray(config.allowedQueryStringParameters) ? config.allowedQueryStringParameters : [];\n    const allParams = getAllParams(queryString);\n    const allowedParams = [];\n    allowedQueryStringParameters.forEach(param => {\n        if (typeof param === 'string') {\n            const [key, value = true] = param.split('=');\n            allowedParams.push({ key, value });\n        } else if (\n            param\n            && typeof param === 'object'\n            && hasOwn(param, 'key')\n            && hasOwn(param, 'value') // Schema check\n        ) {\n            param.key = param.key.trim();\n            param.value = (`${param.value}`).trim();\n            allowedParams.push(param);\n        }\n    });\n    let result = false;\n    allowedParams.forEach(param => {\n        const currentResult = !!allParams.filter(queryParam => (\n            param.key === queryParam.key\n            && (param.value === queryParam.value || param.value === true)\n        )).length;\n        result = result || currentResult;\n    });\n    return result;\n}\n\n// Extending current Logger class to include all console methods\nif (typeof console !== 'undefined') {\n    Object.keys(console).forEach(prop => {\n        if (typeof console[prop] === 'function') {\n            Logger.prototype[prop] = function (...args) {\n                if (\n                    (\n                        matchesURL(this.location.hostname, this.config)\n                        || matchesQueryParam(this.location.search, this.config)\n                    )\n                    && matchesPort(this.location.port, this.config)\n                    && !this.config.disable\n                ) {\n                    console[prop](...args);\n                }\n            };\n        } else {\n            Logger.prototype[prop] = console[prop];\n        }\n    });\n}"],"names":["Logger","config","Object","freeze","allowedHostnames","disable","allowedQueryStringParameters","allowedPorts","location","window","URL","href","matchesURL","hostname","Array","isArray","length","filter","indexOf","matchesPort","port","map","trim","getAllParams","queryString","substring","charAt","split","pairs","part","decodeURIComponent","key","value","hasOwn","object","prototype","hasOwnProperty","call","matchesQueryParam","allParams","allowedParams","forEach","param","push","result","currentResult","queryParam","console","keys","prop","search"],"mappings":"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"}